(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,t,a){e.exports=a(48)},23:function(e,t,a){},24:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(16),l=a.n(r),s=(a(23),a(24),a(3)),o=a(2),m=a(5),u=a.n(m);var i=function(e){var t=e.project,a=e.callback,n=new Date,r="warning",l=!1;return"Completed"===t.status?r="danger":"In Progress"===t.status&&(r="success"),new Date(t.dueDate)<n.setDate(n.getDate()-1)&&(l=!0),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"card m-2"},c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title text-left"},t.name),l?c.a.createElement("p",{className:"text-left text-danger"},"Due date: ",t.dueDate.slice(0,-14)):c.a.createElement("p",{className:"text-left"},"Due date: ",t.dueDate.slice(0,-14)),"Completed"===t.status?c.a.createElement("button",{onClick:function(){return a(t)},className:"btn btn-block btn-"+r},"Remove Project"):c.a.createElement("button",{onClick:function(){return a(t)},className:"btn btn-block btn-"+r},t.status," ",c.a.createElement("strong",null,">")))))};var d=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=(a[0],a[1]),l=Object(n.useState)([]),m=Object(o.a)(l,2),d=m[0],p=m[1],E=Object(n.useState)([]),b=Object(o.a)(E,2),f=b[0],h=b[1],v=Object(n.useState)([]),g=Object(o.a)(v,2),j=g[0],N=g[1];function w(){u.a.get("http://localhost:8001/api/projects/all").then((function(e){h(e.data.allProjects.sort((function(e,t){return new Date(e.dueDate)-new Date(t.dueDate)})).filter((function(e){return"In Progress"===e.status}))),p(e.data.allProjects.sort((function(e,t){return new Date(e.dueDate)-new Date(t.dueDate)})).filter((function(e){return"Backlog"===e.status}))),N(e.data.allProjects.sort((function(e,t){return new Date(e.dueDate)-new Date(t.dueDate)})).filter((function(e){return"Completed"===e.status}))),r(e.data.allProjects)}))}function k(e){if("Completed"===e.status)return function(e){u.a.delete("http://localhost:8001/api/projects/delete/".concat(e._id),{id:e._id}).then((function(e){console.log("Successfuly deleted a project: ",e),w()})).catch((function(e){return console.log("Error while deleting: ",e)}))}(e),!0;switch(e.status){case"Backlog":e.status="In Progress";break;case"In Progress":e.status="Completed";break;default:console.log("some unknown status received")}u.a.put("http://localhost:8001/api/projects/update/".concat(e._id),e).then((function(e){console.log("project successfully updated: ",e),w()})).catch((function(e){return console.log("Error happend while updatin project: ",e)}))}return Object(n.useEffect)((function(){w()}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container mt-5"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-4"},c.a.createElement("h2",{className:"text-primary border"},"Backlog"),c.a.createElement("div",{className:"projects border"},d.map((function(e,t){return c.a.createElement(i,{key:t,project:e,callback:k})})))),c.a.createElement("div",{className:"col-sm-4"},c.a.createElement("h2",{className:"text-warning border"},"In Progress"),c.a.createElement("div",{className:"projects border"},f.map((function(e,t){return c.a.createElement(i,{key:t,project:e,callback:k})})))),c.a.createElement("div",{className:"col-sm-4"},c.a.createElement("h2",{className:"text-success border"},"Completed"),c.a.createElement("div",{className:"projects border"},j.map((function(e,t){return c.a.createElement(i,{key:t,project:e,callback:k})}))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col text-left p-3"},c.a.createElement(s.a,{className:"btn btn-primary",to:"projects/new"},c.a.createElement("div",{className:"plus radius mr-2"}),"Add New Project")))))};var p=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),m=Object(o.a)(l,2),i=m[0],d=m[1],p=Object(n.useState)(""),E=Object(o.a)(p,2),b=E[0],f=E[1],h=Object(n.useState)(""),v=Object(o.a)(h,2),g=v[0],j=v[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container mt-3"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col text-right"},c.a.createElement(s.a,{to:"/"},"Back To Dashboard"))),c.a.createElement("div",{className:"row d-flex justify-content-center"},c.a.createElement("div",{className:"col-6"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u.a.post("http://localhost:8001/api/projects/new",{name:a,dueDate:b}).then((function(e){Object(s.c)("/")})).catch((function(e){if(console.log("Error happend :(",e),"MongoError"===e.response.data.error.name)d('Project name must be unique, "'.concat(e.response.data.error.keyValue.name,'" has already been taken!'));else for(var t=e.response.data.error.errors,a=0,n=Object.keys(t);a<n.length;a++){var c=n[a];"name"===c?d(t[c].message):j(t[c].message)}}))}},c.a.createElement("div",{className:"form-group"},i&&c.a.createElement("p",{className:"text-danger"},i),c.a.createElement("label",{htmlFor:""},"Project Name: "),c.a.createElement("input",{type:"text",className:"form-control",value:a,onChange:function(e){return function(e){e.name;var t=e.value;r(t),t.length<3?d("Name should be at least 3 characters long"):d("")}(e.target)}})),c.a.createElement("div",{className:"form-group"},g&&c.a.createElement("p",{className:"text-danger"},g),c.a.createElement("label",{htmlFor:""},"Due Date: "),c.a.createElement("input",{type:"date",className:"form-control",value:b,onChange:function(e){return function(e){e.name;var t=e.value;f(t),""!=t&&j("")}(e.target)}})),c.a.createElement("button",{className:"btn btn-success btn-block",type:"submit"},"Add Project"))))))};var E=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"container mt-4"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"Project Manager")))),c.a.createElement(s.b,null,c.a.createElement(d,{path:"/"}),c.a.createElement(p,{path:"projects/new"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.972b2384.chunk.js.map