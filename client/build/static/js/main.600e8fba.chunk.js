(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{111:function(e,a){},116:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(7),s=t.n(c),l=(t(59),t(60),t(5)),o=t(14),i=t(9),d=t(1),m=t(4),u=t(24),p=t.n(u);var g=function(e){var a=e.project,t=e.callback,n=new Date,c="warning",s=!1;return"Completed"===a.status?c="danger":"In Progress"===a.status&&(c="success"),new Date(a.dueDate)<n.setDate(n.getDate()-1)&&(s=!0),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card item m-2"},r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-title fs32"},a.name),s?r.a.createElement("p",{className:"text-left text-danger"},"Due date: ",a.dueDate.slice(0,-14)):r.a.createElement("p",{className:"text-left"},"Due date: ",a.dueDate.slice(0,-14)),"Completed"===a.status?r.a.createElement("button",{onClick:function(){return t(a)},className:"btn fs28 btn-"+c},"Remove Project"):r.a.createElement("button",{onClick:function(){return t(a)},className:"btn fs32 btn-"+c},a.status," ",r.a.createElement("strong",null,">")))))},f=t(52),b=t.n(f);var E=function(e){var a=Object(n.useState)([]),t=Object(d.a)(a,2),c=t[0],s=t[1],u=Object(n.useState)([]),p=Object(d.a)(u,2),f=p[0],E=p[1],v=Object(n.useState)([]),j=Object(d.a)(v,2),h=j[0],N=j[1],O=Object(n.useState)([]),D=Object(d.a)(O,2),k=D[0],w=D[1],y=Object(n.useState)((function(){return b()(":8000")})),P=Object(d.a)(y,1)[0],I=Object(n.useState)(c),x=Object(d.a)(I,2);function S(e){var a=e.data;console.log("saveAndSortProjects -> data",a);var t=a.map((function(e,a){return Object(i.a)(Object(i.a)({},e),{},{id:a+""})}));N(t.sort((function(e,a){return new Date(e.dueDate)-new Date(a.dueDate)})).filter((function(e){return"In Progress"===e.status}))),E(t.sort((function(e,a){return new Date(e.dueDate)-new Date(a.dueDate)})).filter((function(e){return"Backlog"===e.status}))),w(t.sort((function(e,a){return new Date(e.dueDate)-new Date(a.dueDate)})).filter((function(e){return"Completed"===e.status}))),s(t.map((function(e,a){return Object(i.a)(Object(i.a)({},e),{},{id:a+""})})))}function C(e,a){switch(e.status){case"Backlog":e.status="In Progress";break;case"In Progress":e.status="Completed";break;case"Completed":e.status="Backlog";break;default:console.log("some unknown status received")}P.emit("update project",e)}x[0],x[1],Object(n.useEffect)((function(){return console.log("Is this running?"),P.on("all projects",S),P.on("update project response",(function(e){console.log("update received",e)})),function(){return P.disconnect(!0)}}),[]);var B=function(e,a){return Object(i.a)({userSelect:"none"},a)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container mt-5"},r.a.createElement("div",{className:"row"},r.a.createElement(m.a,{onDragEnd:function(e){var a,t,n=e.source,r=e.destination;if(console.log(n,r),r){"0"===n.droppableId?(a=f,t=E):"1"===n.droppableId?(a=h,t=N):(a=k,t=w);var l=+n.droppableId,i=+r.droppableId;if(l===i){t(function(e,a,t){var n=Object(o.a)(e),r=n.splice(a,1),c=Object(d.a)(r,1)[0];return n.splice(t,0,c),n}(Object(o.a)(a),e.source.index,e.destination.index))}else{var m=function(e,a,t,n){var r=Array.from(e),c=Array.from(a),s=r.splice(t.index,1),l=Object(d.a)(s,1)[0];c.splice(n.index,0,l);var o={};return o[t.droppableId]=r,o[n.droppableId]=c,o}(c[l],c[i],n,r),u=Object(o.a)(c);u[l]=m[l],u[i]=m[i],s(u.filter((function(e){return e.length})))}}}},r.a.createElement(m.c,{droppableId:"0"},(function(e,a){return r.a.createElement("div",Object.assign({className:"col-4",ref:e.innerRef,style:(a.isDraggingOver,{padding:10})},e.droppableProps),r.a.createElement("div",{className:"transparent-background pt-3"},r.a.createElement("h2",{className:"backlog-heading fs40"},"Backlog"),r.a.createElement("div",{className:"projects backlog"},f.map((function(e,a){return r.a.createElement(m.b,{key:e.id,draggableId:e.id,index:a},(function(a,t){return r.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:B(t.isDragging,a.draggableProps.style)}),r.a.createElement(g,{project:e,callback:C}),a.placeholder)}))}))),e.placeholder))})),r.a.createElement(m.c,{droppableId:"1"},(function(e,a){return r.a.createElement("div",Object.assign({className:"col-4 ",ref:e.innerRef,style:(a.isDraggingOver,{padding:10})},e.droppableProps),r.a.createElement("div",{className:"transparent-background pt-3"},r.a.createElement("h2",{className:"in-progress-heading fs40"},"In Progress"),r.a.createElement("div",{className:"projects in-progress"},h.map((function(e,a){return r.a.createElement(m.b,{key:e.id,draggableId:e.id,index:a},(function(a,t){return r.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:B(t.isDragging,a.draggableProps.style)}),r.a.createElement(g,{project:e,callback:C}),a.placeholder)}))}))),e.placeholder))})),r.a.createElement(m.c,{droppableId:"2"},(function(e,a){return r.a.createElement("div",Object.assign({className:"col-4 ",ref:e.innerRef,style:(a.isDraggingOver,{padding:10})},e.droppableProps),r.a.createElement("div",{className:"transparent-background pt-3"},r.a.createElement("h2",{className:"completed-heading fs40"},"Completed"),r.a.createElement("div",{className:"projects completed"},k.map((function(e,a){return r.a.createElement(m.b,{key:e.id,draggableId:e.id,index:a},(function(a,t){return r.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:B(t.isDragging,a.draggableProps.style)}),r.a.createElement(g,{project:e,callback:C}),a.placeholder)}))}))),e.placeholder))})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left p-3"},r.a.createElement(l.a,{className:"btn  fs32 btn-success",to:"projects/new"},r.a.createElement("div",{className:"plus radius mr-2"}),"Add New Project")))))};var v=function(){var e=Object(n.useState)(""),a=Object(d.a)(e,2),t=a[0],c=a[1],s=Object(n.useState)(""),o=Object(d.a)(s,2),i=o[0],m=o[1],u=Object(n.useState)(""),g=Object(d.a)(u,2),f=g[0],b=g[1],E=Object(n.useState)(""),v=Object(d.a)(E,2),j=v[0],h=v[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container mt-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-right"},r.a.createElement(l.a,{to:"/",className:"fs36 text-dark"},"Back To Dashboard"))),r.a.createElement("div",{className:"row d-flex transparent-background justify-content-center"},r.a.createElement("div",{className:"col-6 fs32"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p.a.post("http://localhost:8000/api/projects/new",{name:t,dueDate:f}).then((function(e){Object(l.c)("/")})).catch((function(e){if(console.log("Error happend :(",e),"MongoError"===e.response.data.error.name)m('Project name must be unique, "'.concat(e.response.data.error.keyValue.name,'" has already been taken!'));else for(var a=e.response.data.error.errors,t=0,n=Object.keys(a);t<n.length;t++){var r=n[t];"name"===r?m(a[r].message):h(a[r].message)}}))}},r.a.createElement("div",{className:"form-group"},i&&r.a.createElement("p",{className:"text-danger fs32"},i),r.a.createElement("label",{htmlFor:"",className:"form-heading fs40"},"Project Name: "),r.a.createElement("input",{type:"text",className:"form-control fs32",value:t,onChange:function(e){return function(e){e.name;var a=e.value;c(a),a.length<3?m("Name should be at least 3 characters long"):m("")}(e.target)}})),r.a.createElement("div",{className:"form-group"},j&&r.a.createElement("p",{className:"text-danger"},j),r.a.createElement("label",{htmlFor:"",className:"form-heading fs40"},"Due Date: "),r.a.createElement("input",{type:"date",className:"form-control fs32",value:f,onChange:function(e){return function(e){e.name;var a=e.value;b(a),""!==a&&h("")}(e.target)}})),r.a.createElement("button",{className:"btn  fs32 btn-success",type:"submit"},"Add Project"))))))};var j=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container mt-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col title-head"},r.a.createElement("h1",null,"Project Manager")))),r.a.createElement(l.b,null,r.a.createElement(E,{path:"/"}),r.a.createElement(v,{path:"projects/new"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,a,t){e.exports=t(116)},59:function(e,a,t){},60:function(e,a,t){}},[[54,1,2]]]);
//# sourceMappingURL=main.600e8fba.chunk.js.map